# 通信协议文档

## 1. 概述
本文档描述了系统中使用的各种设备通信协议。

## 2. IT8512+ 电子负载协议

### 2.1 基本信息
- 通信方式：串口
- 波特率：9600
- 数据位：8
- 校验位：无
- 停止位：1
- 数据格式：二进制
- 命令长度：26字节

### 2.2 命令格式
| 字节位置 | 内容 | 说明 |
|---------|------|------|
| 0 | 0xAA | 同步头 |
| 1 | 地址 | 0xFF为广播地址 |
| 2 | 命令字 | 具体命令 |
| 3-24 | 数据 | 命令参数 |
| 25 | 校验和 | 前25字节的和 |

### 2.3 命令列表
1. 控制命令 (0x20)
   - 面板/PC控制切换
   - 参数：0=面板，1=PC

2. 输入控制 (0x21)
   - 输入开关控制
   - 参数：0=OFF，1=ON

3. 工作模式 (0x5D)
   - 设置工作模式
   - 参数：
     - 0x00: CV
     - 0x01: CC
     - 0x02: CW
     - 0x03: CR
     - 0x1A: DC
     - 0x1B: DV
     - 0x1C: DW
     - 0x1D: DR

4. 状态查询 (0x5F)
   - 返回设备状态
   - 包含：电压、电流、功率、温度等

### 2.4 错误处理
- 通信超时：100ms
- 校验错误：重发3次
- 命令错误：返回错误码

## 3. LED驱动器协议

### 3.1 基本信息
- 通信方式：串口
- 协议类型：Modbus-RTU
- 波特率：115200
- 数据位：8
- 校验位：无
- 停止位：1

[... 其他协议细节 ...]