# 开发指南

## 1. 开发环境配置
### 1.1 必需工具
- Qt Creator 5.14.2+
- MinGW 64-bit
- Git

### 1.2 推荐工具
- Visual Studio Code
- Qt Designer
- SerialPort Assistant (调试用)

## 2. 代码规范

### 2.1 命名规范
- 类名: PascalCase (如 DriverBase)
- 方法名: camelCase (如 connectToPort)
- 成员变量: m_camelCase (如 m_serial)
- 常量: SCREAMING_SNAKE_CASE (如 MAX_CHANNELS)

### 2.2 文件组织
- 头文件(.h)与源文件(.cpp)分离
- 实现文件遵循头文件顺序
- 相关文件放在同一目录

### 2.3 注释规范
- 类声明必须包含功能说明
- 公共方法需要注释参数和返回值
- 复杂算法需要详细注释
- 使用中文注释

## 3. 架构说明

### 3.1 通信层设计
- Protocol 作为基类定义通信接口
- 具体协议类实现数据打包和解析
- 使用状态模式处理不同通信状态

### 3.2 设备层设计
- 基类定义通用接口
- 派生类实现具体设备功能
- Widget类处理UI交互
- 使用组合模式组织UI组件

### 3.3 数据流
1. UI操作触发命令
2. 协议层打包数据
3. 串口发送命令
4. 接收响应数据
5. 解析并更新UI

## 4. 测试规范

### 4.1 单元测试
- 协议数据打包/解析
- 参数有效性检查
- 错误处理机制

### 4.2 集成测试
- 设备通信流程
- UI交互响应
- 数据处理流程

### 4.3 系统测试
- 多设备协同工作
- 异常情况处理
- 性能测试

## 5. 版本控制

### 5.1 分支管理
- master: 稳定版本
- develop: 开发版本
- feature/*: 新功能
- bugfix/*: 错误修复

### 5.2 提交规范
- feat: 新功能
- fix: 修复bug
- docs: 文档更新
- style: 代码格式
- refactor: 重构
- test: 测试相关

## 6. 发布流程

### 6.1 版本号规则
- 主版本号: 重大更新
- 次版本号: 功能更新
- 修订号: bug修复

### 6.2 发布步骤
1. 更新版本号
2. 更新更新日志
3. 打包程序
4. 测试验证
5. 发布版本

## 7. 常见问题

### 7.1 开发问题
- 串口通信问题排查
- UI卡顿优化方案
- 内存泄漏检测

### 7.2 调试技巧
- 使用QDebug输出
- 串口调试助手
- 内存检测工具